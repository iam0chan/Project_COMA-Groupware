<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">
	<resultMap type="board" id="boardMap">
		<id column="BOARD_NO" property="boardNo"/>
		<result column="BOARD_TITLE" property="boardTitle"/>
		<result column="BOARD_CONTENT" property="boardContent"/>
		<result column="BOARD_DATE" property="boardDate"/>
		<result column="BOARD_READ_COUNT" property="boardReadCount"/>
		<result column="BOARD_FILE_CHECK" property="boardFileCheck"/>
		<result column="BOARD_TYPE" property="boardType"/>
		<association resultMap="emp.empMap" property="emp"/>
	</resultMap>
	
	<select id="selectBoardByType" resultMap="boardMap" parameterType="_int">
		SELECT *
		FROM BOARD
		JOIN EMP USING(EMP_ID)
		WHERE BOARD_TYPE=#{boardType}
	</select>
	
	<select id="selectNoticePost" resultMap="boardMap" parameterType="map">
		SELECT *
		FROM BOARD
		WHERE BOARD_NO=#{boardNo}
	</select>
	
	<select id="selectBoardByNo" resultMap="boardMap" parameterType="_int">
	    SELECT BOARD_NO, EMP_ID, BOARD_TITLE, BOARD_CONTENT
	    FROM BOARD
	    WHERE BOARD_NO=#{boardNo}
	</select>
	
	<insert id="insertBoard" parameterType="board">
		INSERT INTO BOARD(BOARD_NO, EMP_ID, BOARD_TITLE, BOARD_CONTENT, BOARD_DATE, BOARD_TYPE)
		VALUES(SEQ_BOD_NO.NEXTVAL, #{emp.empId}, #{boardTitle}, #{boardContent}, SYSDATE, 0)
	</insert>
	
	<select id="selectBoardCount" resultType="_int">
		SELECT COUNT(*)
		FROM BOARD
	</select>
</mapper>